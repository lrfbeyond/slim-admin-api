webpackJsonp([7],{"3m+S":function(e,t){},GF4k:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={data:function(){return{loading:!1,url:"/api/auth",codeImg:"",loginForm:{username:"",password:"",code:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"change"}],password:[{required:!0,message:"请输入密码",trigger:"change"}],code:[{required:!0,message:"请输入验证码",trigger:"change"}]}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){t.loading=!0;var o=t.loginForm;t.$axios.post(t.url,o).then(function(e){"success"===e.data.result?(t.loading=!1,t.$message({message:"登录成功！",type:"success"}),sessionStorage.setItem("hw_username",e.data.uname),sessionStorage.setItem("token",e.data.token),t.$router.push("/main")):(t.loading=!1,t.$message.error(e.data.msg),t.refreshCode())}).catch(function(e){t.loading=!1,t.$message.error("出错了"),console.log(e)})}else console.log("error submit!!")})},refreshCode:function(){this.codeImg=this.url+"/captcha?"+1e3*Math.random()}},mounted:function(){this.refreshCode()}},r={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"login-wrap"},[o("div",{staticClass:"hw-login"},[o("div",{staticClass:"hw-title"},[e._v("HW网站管理系统")]),e._v(" "),o("el-form",{ref:"loginForm",attrs:{model:e.loginForm,rules:e.rules},on:{submit:function(t){t.preventDefault(),e.submitForm("loginForm")}}},[o("el-form-item",{attrs:{prop:"username"}},[o("el-input",{attrs:{placeholder:"请输入账号"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),e._v(" "),o("el-form-item",{attrs:{prop:"password"}},[o("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),e._v(" "),o("el-form-item",{attrs:{prop:"code"}},[o("el-input",{staticStyle:{width:"140px"},attrs:{type:"text",placeholder:"请输入验证码"},model:{value:e.loginForm.code,callback:function(t){e.$set(e.loginForm,"code",t)},expression:"loginForm.code"}}),e._v(" "),o("img",{staticClass:"code-img",attrs:{src:e.codeImg,alt:"点击刷新",title:"点击刷新"},on:{click:function(t){e.refreshCode()}}})],1),e._v(" "),o("div",{staticClass:"login-btn"},[o("el-button",{attrs:{type:"primary","native-type":"submit"},on:{click:function(t){t.preventDefault(),e.submitForm("loginForm")}}},[e._v(e._s(e.loading?"登录中":"登录"))])],1)],1)],1)])},staticRenderFns:[]};var a=o("Z0/y")(s,r,!1,function(e){o("3m+S")},"data-v-3bd88563",null);t.default=a.exports}});
//# sourceMappingURL=7.8f1ca1dd4603b317a032.js.map